<section class="my-5 w-100 d-flex flex-column justify-content-center align-items-center">
    <div class="px-4 py-1 cont w-100">

        <div class="row border-bottom pb-3">
            <div class="col-12 col-md-6">
                <h1 class="m-0 p-0 fw-bold">Mi lista de deseos</h1>
                <p class="m-0 p-0 opacity-50">12 libros guardados para mas tarde</p>
            </div>

            <div class="col-12 col-md-6 d-flex align-items-center justify-content-md-end">
                <button class="btn-black-white p-1 border-secondary">
                    <i class="fa-solid fa-share-nodes pe-2"></i>
                    <span>Compartir lista</span>
                </button>
            </div>
        </div>

        <div class="inp-search  w-75 rounded-3 px-3 py-2 bg-white d-flex align-items-center gap-3 mt-4">
            <span class="border-0"><i class="bi bi-search"></i></span>
            <input type="search" class="w-100 bg-transparent" placeholder="Busca por titulo o autor...">
        </div>


        <div class="row pt-5 g-4">

            @for (book of wishlist(); track book.id) {
                <div class="col-12 col-md-6 col-lg-3">
                    <div class="bg-white-shadow d-flex flex-column gap-2 rounded-3 p-3">
                        <div class="d-flex flex-column position-relative" [ngClass]="book.stock ? '':'opacity-50'">
                            <img src="{{book.image}}" class="img-fluid m-card rounded-3">
                            @if (book.stock > 5) {
                                <div class="rounded-pill bg-white align-self-end m-2 position-absolute">
                                    <p class="m-0 p-0 fw-semibold text-success px-2 py-1">En stock</p>
                                </div>
                            } @else if (book.stock <= 5 && book.stock > 0) {
                                <div class="rounded-pill bg-white align-self-end m-2 position-absolute">
                                    <p class="m-0 p-0 fw-semibold text-warning px-2 py-1">Últimos {{ book.stock }} libros</p>
                                </div>
                            } @else if (book.stock == 0){
                                <div class="rounded-pill bg-white align-self-end m-2 position-absolute">
                                    <p class="m-0 p-0 fw-semibold text-danger px-2 py-1">Agotado</p>
                                </div>
                            }
                        </div>

                        <div [ngClass]="book.stock ? '':'opacity-50'">
                            <p class="m-0 p-0 fw-semibold">{{ book.title }}</p>
                            <p class="m-0 p-0 opacity-50">{{ book.authors }}</p>
                            <p class="m-0 p-0 fw-semibold text-primary">{{ book.price }} €</p>
                        </div>

                        <div class="d-flex gap-1 justify-content-between">
                            <button class="btn btn-primary"
                                    [disabled]="!book.stock"
                                    (click)="cartService.add(book, true)"
                            >
                                <i class="fa-solid fa-cart-plus"></i>
                                Agregar
                            </button>
                            <button class="btn btn_delete" (click)="deleteBookWishlist(book.slug)">
                                <i class="fa-solid fa-trash-can"></i>
                            </button>
                        </div>
                    </div>
                </div>
            }


        </div>


    </div>
</section>